<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Engineering Projects</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .card{border-radius:24px;background:#111827cc;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    .chip{padding:.2rem .6rem;border-radius:9999px;background:#1f2937;color:#d1d5db;border:1px solid #374151;font-size:.75rem}
    .slide{position:relative;overflow:hidden}
    .slide img{display:block;width:100%;height:340px;object-fit:cover}
    .navbtn{position:absolute;top:50%;transform:translateY(-50%);background:#111827bf;border:1px solid #374151;border-radius:12px;width:40px;height:40px;color:#c7d2fe;display:grid;place-items:center}
    .navbtn.left{left:12px} .navbtn.right{right:12px}
    .dots{position:absolute;bottom:12px;left:0;right:0;display:flex;gap:8px;justify-content:center}
    .dot{width:8px;height:8px;border-radius:9999px;background:#6b7280}
    .dot.active{background:#c7d2fe}
  </style>
</head>
<body class="bg-[#0b1120] text-gray-200">
  <header class="max-w-7xl mx-auto px-6 py-8">
    <h1 class="text-5xl font-extrabold">Engineering Projects</h1>
    <p class="text-gray-400 mt-2">Portfolio with CAD/CAE projects, interactive 3D models, and mixed-media galleries.</p>
  </header>

  <main class="max-w-7xl mx-auto px-6 pb-20">
    <div id="grid" class="grid gap-8 sm:grid-cols-2 xl:grid-cols-3"></div>
  </main>

  <script>
    // tiny slider util (mismo comportamiento que v2.6.0)
    function mountSlider(root, images){
      const wrap = document.createElement('div'); wrap.className='slide';
      let idx = 0;
      const img = document.createElement('img'); img.src = images[0]; wrap.appendChild(img);
      const L = document.createElement('button'); L.className='navbtn left'; L.innerHTML='&#x2039;';
      const R = document.createElement('button'); R.className='navbtn right'; R.innerHTML='&#x203A;';
      const dots = document.createElement('div'); dots.className='dots';
      const set = i => { idx=(i+images.length)%images.length; img.src=images[idx]; [...dots.children].forEach((d,n)=>d.classList.toggle('active',n===idx)); };
      L.onclick=()=>set(idx-1); R.onclick=()=>set(idx+1);
      images.forEach((_,i)=>{ const d=document.createElement('div'); d.className='dot'+(i===0?' active':''); d.onclick=()=>set(i); dots.appendChild(d); });
      wrap.append(L,R,dots); root.appendChild(wrap);
    }

    async function main(){
      const res = await fetch('projects.json'); const projects = await res.json();
      const grid = document.getElementById('grid');

      projects.forEach(p=>{
        const card = document.createElement('article'); card.className='card overflow-hidden';
        // slider
        const sliderHost = document.createElement('div'); mountSlider(sliderHost, p.images);
        card.appendChild(sliderHost);

        // body
        const body = document.createElement('div'); body.className='p-6';
        body.innerHTML = `
          <h3 class="text-2xl font-bold mb-2">${p.title}</h3>
          <p class="text-gray-300 mb-4">${p.description}</p>
          <div class="flex gap-2 mb-6">${p.tags.map(t=>`<span class="chip">${t}</span>`).join('')}</div>
          <a class="inline-flex items-center justify-center rounded-2xl bg-indigo-500 hover:bg-indigo-400 text-white px-5 py-3 font-semibold"
             href="project.html?slug=${encodeURIComponent(p.slug)}">Open</a>
        `;
        card.appendChild(body);
        grid.appendChild(card);
      });
    }
    main();
  </script>
</body>
</html>
